<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>한국사 연표 학습 프로그램</title>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 40px 20px;
            background: #f0f2f5;
            color: #333;
        }
        h1 {
            text-align: center;
            margin-bottom: 40px;
            color: #1a1a1a;
        }
        
        /* 컨트롤 영역 */
        .controls {
            text-align: center;
            margin-bottom: 30px;
        }
        #sound-toggle {
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #ccc;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }
        #sound-toggle:hover {
            background: #e9ecef;
        }

        /* 타임라인 전체 컨테이너 */
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 15px; /* 줄 간격 */
            max-width: 900px;
            margin: 0 auto;
        }

        /* 한 줄 (Row) 스타일: [버튼그룹] --- [연도] */
        .timeline-row {
            display: flex;
            align-items: center; /* 수직 중앙 정렬 */
            width: 100%;
        }

        /* 왼쪽: 사건 버튼들이 모여있는 그룹 */
        .event-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: flex-end; /* 버튼들이 오른쪽(연도쪽)에 붙게 하려면 flex-end, 왼쪽이면 flex-start */
            max-width: 70%; /* 버튼 영역 최대 너비 */
        }

        /* 개별 사건 버튼 */
        .event-btn {
            background: white;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            border: 1px solid #ddd;
            font-size: 14px;
            font-weight: 600;
            transition: transform 0.2s, background 0.2s;
            word-break: keep-all;
        }
        .event-btn:hover {
            background: #e3f2fd; /* 호버 시 연한 파란색 */
            transform: translateY(-2px);
            border-color: #2196f3;
            color: #2196f3;
        }

        /* 가운데: 점선 (공백을 채움) */
        .connector-line {
            flex-grow: 1; /* 남은 공간 모두 차지 */
            height: 1px;
            border-bottom: 2px dashed #bbb;
            margin: 0 15px;
            position: relative;
            top: -1px; /* 시각적 중앙 보정 */
        }

        /* 오른쪽: 연도 표시 */
        .year-label {
            font-weight: bold;
            font-size: 15px;
            color: #555;
            white-space: nowrap; /* 줄바꿈 방지 */
            background: #f0f2f5; /* 배경색과 맞춰서 선이 글자 뒤로 안 보이게 */
            padding-left: 5px;
            min-width: 80px; /* 연도 영역 최소 너비 확보 */
            text-align: right;
        }

        /* 팝업 스타일 */
        .popup {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none;
            background: rgba(0,0,0,0.6);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .popup-content {
            background: white;
            padding: 25px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        .popup-content h2 {
            margin-top: 0;
            color: #2196f3;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .popup-content p {
            line-height: 1.6;
            color: #444;
        }
        .popup-content img {
            max-width: 100%;
            border-radius: 8px;
            margin: 10px 0;
            display: block;
        }
        .close-btn {
            display: block;
            width: 100%;
            padding: 12px 0;
            background: #333;
            color: white;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
        }
        .close-btn:hover {
            background: #555;
        }

        /* 모바일 대응 */
        @media (max-width: 600px) {
            .timeline-row {
                flex-direction: column-reverse; /* 모바일엔 연도가 위로 가거나 아래로 가게 */
                align-items: flex-start;
                background: white;
                padding: 15px;
                border-radius: 10px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            }
            .connector-line {
                display: none; /* 모바일에서 선 숨김 */
            }
            .year-label {
                margin-bottom: 10px;
                text-align: left;
                color: #2196f3;
                font-size: 1.1em;
            }
            .event-group {
                max-width: 100%;
                justify-content: flex-start;
            }
            .event-btn {
                background: #f8f9fa;
                border: 1px solid #eee;
            }
        }
    </style>
</head>
<body>

    <h1>한국사 연표 학습</h1>

    <div class="controls">
        <button id="sound-toggle">🔇 음소거 해제</button>
    </div>

    <audio id="bgm" src="music.mp3" loop muted></audio>

    <div class="timeline" id="timeline"></div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <h2 id="popup-title"></h2>
            <div id="popup-desc"></div>
            <span class="close-btn" onclick="closePopup()">닫기</span>
        </div>
    </div>

    <script>
        /* ==============================
           ✏️ 데이터 영역 (전체 통합됨)
        ============================== */
        const events = [
            {
                year: "1945년 8월 15일",
                title: "8·15 광복",
                description: "일제가 무조건 항복을 선언하며 광복을 맞이함."
            },
            {
                year: "1945년 8월 15일",
                title: "조선 건국 준비 위원회",
                description: "여운형이 조선 건국 동맹을 중심으로 좌익과 우익을 아울러 <span style='color:red'>*건준</span>을 조직함.<br>전국에 지부 설치, 치안대 조직. 식량·생활필수품 확보.<br><br> <span style='color:red'>*건준</span> : 조선 건국 준비 위원회."
            },
            {
                year: "1945년 8월",
                title: "38도선",
                description: "①소련 참전 : 소련이 일본에 선전 포고 -> 소련군이 만주와 한반도의 일본군과 전투를 벌이며 미국의 예상보다 빠르게 한반도 북부 장악.<br>②38도선 분할 :<br>ㅤ미국은 소련의 남하를 막기 위해 38도선 기준으로 일본군 무장 해제 제안.<br>ㅤ소련이 제안 받은 뒤 이남은 미국, 이북은 소련군이 관할."
            },
            {
                year: "1945년 9월",
                title: "군정",
                description: "<span style='font-weight:bold;'>38도선 이남</span><br>ㆍ미국 통치 : 직접 통치(군정청 설치)<br>ㆍ일제의 식민 통치 기구 (조선 총독부 관료와 경찰 조직) 유지<br>ㆍ임시 정부·조선 인민 공화국 등 부인.<br><br><span style='font-weight:bold;'>38도선 이북</span><br>ㆍ소련 통치 : 간접 통치(각 지역의 인민 위원회에 행정권 이양)<br>ㆍ소련에 우호적 정부 수립 추구 -> 김일성 등 공산주의자 지원"
            },
            {
                year: "1945년 9월",
                title: "조선 인민 공화국 수립",
                description: "미군이 남한 진주할 때 한국인을 대표해 대등한 입장에서 교섭하기 위함.<br>각 지부를 인민 위원회로 전환.<br>이 과정에서 좌익 세력의 주도권 장악, 일부 우익 세력 건준 탈퇴.<br>김성수·송민우 등 건준 활동 비판적인 우익 세력 중심으로 한국 민주당 조직.<br><br><span style='color:green'>좌 - 김일성, 박헌영<br>중도 좌 - 여운형<br>중도 우 - 김규식<br>우 - 이승만, 김구, 송진우</span>"
            },
            {
                year: "1945년 10월, 11월",
                title: "이승만·김구 귀국",
                description: "10월 - 미국에서 돌아온 이승만은 지지 세력을 모아 독립 촉성 중앙 협의회 결성.<br>11월 - 김구 등 대한민국 임시 정부 요인들은 개인 자격으로 귀국 후 한국 독립당 중심으로 활동."
            },
            {
                year: "1945년 12월",
                title: "모스크바 3국 외상 회의",
                description: "미국·영국·소련 3국 외무장관이 모스크바에서 한국 독립 문제 협의.<br>ㆍ미국 : 신탁 통치안 제출.<br>ㆍ소련 : 임시 정부 수립을 내용으로 하는 안 제출.<br>미국·소련 안 절충, 한반도에 민주주의 임시 정부 수립, 미·소 공동 위원회 설치, 최대 5년간의 신탁 통치."
            },
            {
                year: "모스크바 3국 외상 회의+α",
                title: "회의 결정 사항(자료)",
                description: "1. 조선을 독립국으로 재건하고, 민주주의 원칙 위에서 발전하기 위한 조건들을 창출하며... 조선 민주주의 임시 정부를 수립한다.<br>2. 미·소 공동 위원회를 조직한다.<br>3. 최대 5년 기한으로 하는 신탁 통치 협정을 작성한다."
            },
            {
                year: "1945년 12월",
                title: "신탁 통치 문제로 대립",
                description: "잘못된 보도로 <span style='color:red'>신탁 통치 실시가 집중 부각</span>됨.<br>좌익·우익·중도 세력 모두 반탁 운동 전개하다가, 좌익은 회의 내용 전체가 알려지자 지지로 선회.<br>우익·좌익 세력 대립 심화."
            },
            {
                year: "1946년 2월",
                title: "북한 정권 수립 - 1",
                description: "김일성 위원장으로 북조선 임시 인민 위원회 조직.<br>토지 개혁(무상 몰수, 무상 분배), 주요 산업 국유화 등."
            },
            {
                year: "1946년 3월",
                title: "제1차 미·소 공동 위원회",
                description: "미국: 모든 단체 참여 주장 vs 소련: 반탁 단체 제외 주장.<br>결과: 결렬, 무기한 휴회."
            },
            {
                year: "제1차 미·소 공동 위원회+α",
                title: "추가 자료) 미·소 대립",
                description: "소련 측은 모스크바 협정에 반대한 정당 제외 요구. 미국 측은 의사 표시 자유 말살이라며 반대."
            },
            {
                year: "1946년 6월",
                title: "이승만 정읍 발언",
                description: "이승만은 통일 정부 수립 어려우면 남한만이라도 임시 정부를 수립할 것을 주장."
            },
            {
                year: "1946년 10월",
                title: "좌우 합작 위원회",
                description: "여운형·김규식 등 주도. 좌우 합작 7원칙 발표.<br>미군정 지원했으나 냉전 심화로 지원 철회, 여운형 암살(1947)로 중단."
            },
            {
                year: "좌우 합작 위원회+α",
                title: "좌우 합작 7원칙(자료)",
                description: "1. 민주주의 임시 정부 수립.<br>3. 유상 매입 등을 통한 토지 유상 분배.<br>4. 친일 민족 반역자 처벌."
            },
            {
                year: "1947년 3월 1일",
                title: "제주 4·3 사건 배경",
                description: "3·1절 기념행사 중 경찰 발포로 사상자 발생 -> 총파업 -> 미군정 탄압 -> 민심 악화."
            },
            {
                year: "1947년 5월",
                title: "유엔의 남한 단독 선거 결정",
                description: "2차 미소공위 결렬 -> 미국이 유엔 상정 -> 남북한 총선거 결정 -> 소련 거부 -> 유엔 소총회에서 '선거 가능 지역(남한)'만 총선거 결정."
            },
            {
                year: "1948년 4월 3일",
                title: "제주 4·3 사건 전개",
                description: "남한 단독 선거 반대하며 무장봉기 -> 무력 진압 과정에서 수많은 민간인 희생."
            },
            {
                year: "1948년 2월",
                title: "남북 협상",
                description: "김구·김규식이 평양 방문하여 김일성 등과 회담.<br>공동 성명 발표했으나 실질적 성과 없이 끝남."
            },
            {
                year: "제주 4·3 사건+α",
                title: "추가 자료) 진상 조사",
                description: "1947년 3·1절 발포 사건을 기점으로 1954년까지 발생한 무력 충돌과 진압 과정의 희생 사건."
            },
            {
                year: "1948년 5월 10일",
                title: "5·10 총선거 및 제헌 총회",
                description: "최초의 보통·평등·비밀·직접 선거. 제헌 국회의원 선출 (임기 2년)."
            },
            {
                year: "1948년 7월 17일, 8월 15일",
                title: "헌법 반포 및 정부 수립",
                description: "7.17 제헌 헌법 공포 (대통령 간선제).<br>8.15 대한민국 정부 수립 선포."
            },
            {
                year: "1948년 8월 25일",
                title: "북한 정권 수립 - 2",
                description: "최고 인민 회의 대의원 선거 -> 9.9 조선 민주주의 인민 공화국 수립 선포."
            },
            {
                year: "1948년 9월",
                title: "친일파 청산 노력",
                description: "반민족 행위 처벌법 제정, 반민특위 활동.<br>이승만 정부의 비협조와 반공 분위기로 실패 (특위 습격, 공소시효 단축 등)."
            },
            {
                year: "1948년 10월 19일",
                title: "여수·순천 10·19 사건",
                description: "제주 4·3 진압 명령 거부한 군부대 내 좌익 세력이 봉기."
            },
            {
                year: "1950년 5월",
                title: "제2대 국회의원 선거",
                description: "중도파, 무소속 약진. 이승만 지지 세력 약화."
            },
            {
                year: "[경제] 1949년 6월",
                title: "농지 개혁",
                description: "유상 매입, 유상 분배 원칙 (3정보 상한).<br>지주·소작제 소멸, 자영농 육성."
            },
            {
                year: "6·25 전쟁",
                title: "전쟁의 배경",
                description: "미군 철수, 애치슨 선언, 북한의 군사력 강화."
            },
            {
                year: "6·25 전쟁",
                title: "전쟁의 과정 - 1",
                description: "북한 남침(6.25) -> 낙동강 방어선 -> 인천 상륙 작전(9.15) -> 서울 수복 -> 평양 점령 -> 중공군 개입 -> 흥남 철수 -> 1.4 후퇴."
            },
            {
                year: "6·25 전쟁",
                title: "전쟁의 과정 - 2",
                description: "전선 교착. 정전 협정 체결(1953. 7. 27). 포로 송환 문제로 지연됨."
            },
            {
                year: "6·25 전쟁",
                title: "전쟁의 영향",
                description: "인명 피해, 국토 황폐화, 분단 고착화, 적대감 심화."
            },
            {
                year: "1952년",
                title: "발췌 개헌",
                description: "부산 정치 파동. 대통령 직선제 개헌안을 기립 표결로 통과시킴."
            },
            {
                year: "1954년",
                title: "사사오입 개헌",
                description: "초대 대통령에 한해 중임 제한 철폐.<br>1표 부족 부결되었으나 사사오입 논리로 가결 선포."
            },
            {
                year: "1956년 1월, 12월",
                title: "진보당 사건, 국가 보안법",
                description: "조봉암(진보당)이 대선에서 약진하자 간첩 혐의로 처형(1959). 보안법 강화."
            },
            {
                year: "1950년대",
                title: "전후 복구 (경제)",
                description: "삼백 산업 발달(제분, 제당, 면방직). 미국의 원조 경제(잉여 농산물)."
            },
            {
                year: "1950년대",
                title: "북한의 정치",
                description: "김일성 독재 강화 (연안파, 소련파 숙청)."
            },
            {
                year: "1960년",
                title: "4·19 혁명 - 1",
                description: "3·15 부정선거 -> 마산 시위(김주열 시신 발견) -> 4·19 시위 확산."
            },
            {
                year: "1960년",
                title: "4·19 혁명 - 2",
                description: "서울 시위대에 경찰 발포. 교수단 시국 선언 -> 이승만 하야."
            },
            {
                year: "1960년",
                title: "자료) 하야 성명",
                description: "'국민이 원하면 대통령직을 사임할 것이며...'"
            },
            {
                year: "1960년 8월 19일",
                title: "장면 내각 출범",
                description: "내각 책임제 개헌. 윤보선 대통령, 장면 국무총리. 경제 개발 계획 수립 시도."
            },
            {
                year: "1961년 5월 16일",
                title: "5·16 군사 정변",
                description: "박정희 등 군부 세력이 정권 장악. 국가 재건 최고 회의 설치."
            },
            {
                year: "1963년, 1964년",
                title: "제5대 대선, 6·3 시위",
                description: "박정희 대통령 당선. 굴욕적 한일 회담 반대 시위(6·3 시위) 진압."
            },
            {
                year: "1965년",
                title: "한·일 협정",
                description: "한일 국교 정상화. 청구권 자금 도입."
            },
            {
                year: "1964년 ~ 1973년",
                title: "베트남 전쟁 파병",
                description: "브라운 각서(국군 현대화, 경제 원조). 베트남 특수, 고엽제 피해."
            },
            {
                year: "1967년 ~ 1971년",
                title: "3선 개헌",
                description: "대통령 3선 연임 허용 개헌(1969)."
            },
            {
                year: "1969년, 1972년 7월 4일",
                title: "닉슨 독트린, 7·4 남북 공동 성명",
                description: "냉전 완화 분위기. 7·4 남북 공동 성명(자주, 평화, 민족 대단결)."
            },
            {
                year: "1972년 10월",
                title: "10월 유신",
                description: "유신 헌법 선포. 대통령 간선제(통일 주체 국민 회의), 임기 6년, 긴급 조치권."
            },
            {
                year: "1972년 10월 이후",
                title: "유신 반대 운동",
                description: "김대중 납치 사건, 개헌 청원 서명 운동, 3·1 민주 구국 선언."
            },
            {
                year: "1979년",
                title: "유신 체제 붕괴",
                description: "YH 무역 사건 -> 부마 항쟁 -> 10·26 사태(박정희 피살)."
            },
            {
                year: "[경제] 1962년 ~ 1971년",
                title: "1·2차 경제 개발",
                description: "경공업 육성, 수출 주도, 사회 간접 자본 확충(경부 고속 도로)."
            },
            {
                year: "[경제] 1972년 8월 3일",
                title: "8·3 조치",
                description: "기업의 사채 동결 조치."
            },
            {
                year: "[경제] 1972년 ~ 1981년",
                title: "3·4차 경제 개발",
                description: "중화학 공업 육성."
            },
            {
                year: "[경제] 1973년, 1980년대",
                title: "석유 파동, 3저 호황",
                description: "두 차례 석유 파동 극복. 1980년대 중반 3저 호황(저유가, 저금리, 저달러)."
            },
            {
                year: "[사회] 1950년대~",
                title: "재벌 형성",
                description: "정경 유착, 특혜 등을 통해 재벌 성장."
            },
            {
                year: "[사회] 1970년",
                title: "노동 운동 / 새마을 운동",
                description: "전태일 분신(노동 운동). 새마을 운동(농촌 환경 개선)."
            },
            {
                year: "[사회] 1970년",
                title: "도시의 변화",
                description: "와우아파트 붕괴, 광주 대단지 사건(도시 빈민 문제)."
            },
            {
                year: "1979년 12월 12일, 1980년",
                title: "12·12 사태, 서울의 봄",
                description: "신군부(전두환) 정권 장악. 민주화 요구 시위(서울의 봄)."
            },
            {
                year: "1980년 5월 18일",
                title: "5·18 민주화 운동",
                description: "광주 시민들이 신군부의 비상계엄 확대에 맞서 저항. 유네스코 기록유산 등재."
            },
            {
                year: "1981년",
                title: "전두환 정부 수립",
                description: "대통령 간선제(7년 단임). 국보위 설치, 삼청 교육대, 언론 통폐합."
            },
            {
                year: "1981년",
                title: "저항과 강압",
                description: "민주화 운동 탄압. 땡전 뉴스. 프로 야구 출범(우민화 정책)."
            },
            {
                year: "1987년",
                title: "6월 민주 항쟁",
                description: "박종철 고문 치사 -> 4·13 호헌 조치 -> 이한열 최루탄 피격 -> 6·10 항쟁 -> 6·29 선언(직선제 수용)."
            },
            {
                year: "1987년 ~ 1991년",
                title: "노태우 정부",
                description: "대통령 직선제(5년 단임). 여소야대 -> 3당 합당. 북방 외교, 남북 유엔 동시 가입."
            },
            {
                year: "1991년 ~ 1993년",
                title: "남북 관계 진전",
                description: "남북 기본 합의서 채택(1991). 한반도 비핵화 공동 선언(1992)."
            },
            {
                year: "1994년 ~ 1997년",
                title: "김영삼 정부",
                description: "문민정부 출범. 금융 실명제, 지방 자치제 전면 실시. 역사 바로 세우기(총독부 철거). IMF 외환 위기."
            },
            {
                year: "1997년 ~ 2000년",
                title: "김대중 정부",
                description: "최초의 평화적 정권 교체. 외환 위기 극복(금 모으기). 햇볕 정책, 6·15 남북 공동 선언(2000)."
            }
        ];

        const timelineContainer = document.getElementById("timeline");

        // 1. 데이터 그룹화 로직 (연도 기준)
        // 같은 year 문자열을 가진 항목들을 하나의 그룹으로 묶습니다.
        // 순서(index)를 기억하기 위해 map이나 순차 반복을 사용합니다.
        
        let groupedEvents = []; 
        
        if (events.length > 0) {
            // 첫 번째 이벤트를 그룹 시작으로 설정
            let currentGroup = {
                year: events[0].year,
                items: [{ ...events[0], originalIndex: 0 }]
            };

            for (let i = 1; i < events.length; i++) {
                // 현재 이벤트의 연도가 앞선 그룹과 같다면 추가
                if (events[i].year === currentGroup.year) {
                    currentGroup.items.push({ ...events[i], originalIndex: i });
                } else {
                    // 다르다면 기존 그룹 저장 후 새 그룹 시작
                    groupedEvents.push(currentGroup);
                    currentGroup = {
                        year: events[i].year,
                        items: [{ ...events[i], originalIndex: i }]
                    };
                }
            }
            // 마지막 그룹 추가
            groupedEvents.push(currentGroup);
        }

        // 2. 렌더링
        groupedEvents.forEach(group => {
            // 행(Row) 생성
            const rowDiv = document.createElement("div");
            rowDiv.className = "timeline-row";

            // 왼쪽: 버튼 그룹
            const btnGroupDiv = document.createElement("div");
            btnGroupDiv.className = "event-group";

            group.items.forEach(item => {
                const btn = document.createElement("div");
                btn.className = "event-btn";
                btn.innerText = item.title;
                // 클릭 시 팝업 열기 (originalIndex 사용)
                btn.onclick = () => openPopup(item.originalIndex);
                btnGroupDiv.appendChild(btn);
            });

            // 가운데: 연결선
            const lineDiv = document.createElement("div");
            lineDiv.className = "connector-line";

            // 오른쪽: 연도 라벨
            const yearDiv = document.createElement("div");
            yearDiv.className = "year-label";
            yearDiv.innerText = group.year;

            // 조립
            rowDiv.appendChild(btnGroupDiv);
            rowDiv.appendChild(lineDiv);
            rowDiv.appendChild(yearDiv);

            timelineContainer.appendChild(rowDiv);
        });


        // 3. 팝업 기능
        function openPopup(index) {
            const popup = document.getElementById("popup");
            const data = events[index];
            document.getElementById("popup-title").innerText = data.title;
            document.getElementById("popup-desc").innerHTML = data.description;
            popup.style.display = "flex";
        }

        function closePopup() {
            document.getElementById("popup").style.display = "none";
        }
        
        // 팝업 배경 클릭 시 닫기
        document.getElementById("popup").addEventListener("click", function(e) {
            if (e.target === this) closePopup();
        });


        // 4. BGM 기능
        const bgm = document.getElementById("bgm");
        const toggleBtn = document.getElementById("sound-toggle");

        // 브라우저 정책상 자동 재생 실패 시 처리
        bgm.play().catch(error => {
            console.log("자동 재생이 차단되었습니다. 버튼을 눌러주세요.");
        });

        toggleBtn.addEventListener("click", () => {
            if (bgm.muted) {
                bgm.muted = false;
                bgm.play();
                toggleBtn.textContent = "🔊 음소거";
            } else {
                bgm.muted = true;
                toggleBtn.textContent = "🔇 음소거 해제";
            }
        });
    </script>
</body>
</html>